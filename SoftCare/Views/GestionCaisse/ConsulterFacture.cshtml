@model SoftCare.ViewModels.FactureVM2
@{
    Layout = "../../Views/Shared/_SoftCareLayoutPage.cshtml";
    ViewBag.Title = "Détails d'une Facture";
}



@*<div class="row " style="margin:1em">

        <div class="col-lg-3 col-lg-offset-6">
            <div class="form-group">
                <input class="btn btn-primary" type="submit" value="Enregistrer" style="width:100%" />
            </div>
        </div>
        <div class="col-lg-3">
            <div class="form-group">
                <a href="" class="btn btn-warning" style="width:100%">
                    <span class="glyphicon glyphicon-circle-arrow-left"></span>
                    Retourner
                </a>
            </div>
        </div>
    </div>*@


<div class="row" style="margin:2em">

    @using (Html.BeginForm("ENREGISTRERFACTURE", "GestionCaisse", FormMethod.Post, new { @class = "col-lg-12" }))
    {

        @Html.TextBoxFor(model => model.DossierID, new { type = "hidden", value = Model.DossierID })
        @Html.TextBoxFor(model => model.CaissierID, new { type = "hidden", value = Model.CaissierID })

        <div class="row" style="margin-top:0em">


            @if (!Model.EstPaye)
            {
                <div class="col-lg-12" style="margin-bottom:2em">
                    <h5 style="color:#ff6a00">
                        Cette Facture n'est pas encore reglée,
                        <a href="~/GestionCaisse/ENREGISTRERREGLEMENT/@SoftCare.Models.CRYPTAGE.StringHelpers.Decrypt(Model.Id)" style="color:#0094ff"> 
                            Régler cette facture ?
                        </a>
                    </h5>
                </div>
            }

            <div class="col-lg-3">
                <div class="form-group">
                    @Html.LabelFor(model => model.CodeDossier)
                    @Html.TextBoxFor(model => model.CodeDossier, new { @class = "form-control", disabled = "disabled" })
                </div>
            </div>

            <div class="col-lg-5">
                <div class="form-group">
                    @Html.LabelFor(model => model.Patient)
                    @Html.TextBoxFor(model => model.Patient, new { @class = "form-control", disabled = "disabled" })
                </div>
            </div>

            <div class="col-lg-4">
                <div class="form-group">
                    @Html.LabelFor(model => model.Reference)
                    @Html.TextBoxFor(model => model.Reference, new { @class = "form-control", disabled = "disabled" })
                </div>
            </div>

        </div>

        <div class="row" style="margin-top:0em">

            <div class="col-lg-4">
                <div class="form-group">
                    @Html.LabelFor(model => model.Montant)
                    @Html.TextBoxFor(model => model.Montant, new { @class = "form-control", disabled = "disabled" })
                </div>
            </div>

            <div class="col-lg-4">
                <div class="form-group">
                    @Html.LabelFor(model => model.Reste)
                    @Html.TextBoxFor(model => model.Reste, new { @class = "form-control", disabled = "disabled" })
                </div>
            </div>

            <div class="col-lg-4">
                <div class="form-group">
                    @Html.LabelFor(model => model.Caissier)
                    @Html.TextBoxFor(model => model.Caissier, new { @class = "form-control", disabled = "disabled" })
                </div>
            </div>

            @*<div class="col-lg-2">
            <div class="form-group">
                @Html.LabelFor(model => model.EstPaye)
                @Html.TextBoxFor(model => model.EstPaye, new { @class = "form-control", disabled = "disabled" })
            </div>
        </div>*@

        </div>


        <div class="row">

            <section class="col-lg-12 bloc-scrollable table-responsive table-scrollable" style="max-height:23em;">

                <table class="table table-striped table-condensed">


                    @if (Model.ListeProduits == null)
                    {
                        <caption style="color:#000"><h5>Il n'y aucun Produit enregistrée. </h5></caption>
                    }
                    else
                    {
                        <caption style="color:#000">
                            <h5>
                                Liste des Produits ou Services facturés
                            </h5>
                        </caption>

                        <thead>
                            <tr>
                                <th> Réf. </th>
                                <th> Intitulé</th>
                                <th> Prix Unitaire</th>
                                <th> Quantité </th>
                                <th> Prix Total </th>
                            </tr>
                        </thead>
                        <tbody>

                            @foreach (var pMV in Model.ListeProduits)
                            {
                                if (pMV != null)
                                {
                                    <tr>
                                        <td> @pMV.ReferenceProduit</td>
                                        <td>@pMV.NomProduit</td>
                                        <td>@pMV.PrixUnitaire</td>
                                        <td> @pMV.Quantite</td>
                                        <td> @pMV.PrixTotal</td>
                                    </tr>
                                }
                            }
                        </tbody>
                    }
                </table>
            </section>


        </div>


        <div class="row" style="margin-top:3em">

            <div class="col-lg-4 col-lg-offset-4">
                <div class="form-group">
                    <a href="~/GestionCaisse/CONSULTERLISTEFACTURES" class="btn btn-warning" style="width:100%">
                        <span class="glyphicon glyphicon-circle-arrow-left"></span>
                        Retourner
                    </a>
                </div>
            </div>
        </div>
    }

</div>

